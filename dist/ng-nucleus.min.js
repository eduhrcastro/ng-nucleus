(function(root,factory){"function"==typeof define&&define.amd?define(["exports","angular","moment","validator","BrV","StringMask"],factory):"object"==typeof exports?factory(exports,require("angular"),require("angular-moment"),require("validator"),require("br-validations"),require("string-mask")):factory(root.ngNucleus={},root.angular,root.moment,root.validator,root.BrV,root.StringMask)})(this,function(exports,angular,moment,validator,BrV,StringMask){"use strict";if(Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,null==angular)throw new Error("Angularjs cannot be found by ng-nucleus!");if(!angular.isFunction(moment)||angular.isUndefined(moment))throw new Error("Moment cannot be found by ng-nucleus!");if(!angular.isObject(validator)||angular.isUndefined(validator))throw new Error("Validator.js cannot be found by ng-nucleus!");if(!angular.isObject(BrV)||angular.isUndefined(BrV))throw new Error("Br-validations.js cannot be found by ng-nucleus!");if(!angular.isFunction(StringMask)||angular.isUndefined(StringMask))throw new Error("StringMask cannot be found by ng-nucleus!");var _default=angular.module("ngNucleus",[]);exports.default=_default,"use strict",function(){angular.module("ngNucleus").directive("uiCpf",["$window","Validations",function($window,Validations){return{require:"ngModel",link:function(scope,iElement,iAttrs,ngModelCtrl){var clearValue=function(rawValue){return rawValue.toString().replace(/[^\d]/g,"").slice(0,11)},format=function(cleanValue){return($window.StringMask.apply(cleanValue,"000.000.000-00")||"").trim()},validations=function(value){return angular.isDefined(value)&&Validations.isCpf(value)};ngModelCtrl.$parsers.push(function(value){if(ngModelCtrl.$setValidity("cpf",!0),ngModelCtrl.$isEmpty(value))return ngModelCtrl.$setValidity("cpf",!1),value;var cleanValue=clearValue(value),formattedValue=format(cleanValue);return validations(cleanValue)||ngModelCtrl.$setValidity("cpf",!1),ngModelCtrl.$viewValue!==formattedValue&&(ngModelCtrl.$setViewValue(formattedValue),ngModelCtrl.$render()),angular.isUndefined(ngModelCtrl.$viewValue)?cleanValue:formattedValue})}}}])}(),"use strict",function(){angular.module("ngNucleus").directive("uiDate",["$locale","Validations",function($locale,Validations){return{require:"ngModel",link:function(scope,iElement,iAttrs,ngModelCtrl){var dateFormat={"pt-br":"DD/MM/YYYY","es-ar":"DD/MM/YYYY","es-mx":"DD/MM/YYYY",es:"DD/MM/YYYY","en-us":"MM/DD/YYYY",en:"MM/DD/YYYY","fr-fr":"DD/MM/YYYY",fr:"DD/MM/YYYY",ru:"DD.MM.YYYY"}[$locale.id]||"YYYY-MM-DD";iAttrs.parse=iAttrs.parse||"true",dateFormat=iAttrs.uiDateMask||dateFormat;var clearValue=function(rawValue){return angular.isObject(rawValue)||Validations.isISODateString(rawValue)?moment(rawValue).format(dateFormat):(rawValue=rawValue.toString().replace(/[^0-9]/g,"").trim(),moment(rawValue,dateFormat.replace("/","")).format(dateFormat))},validations=function(value){return!ngModelCtrl.$isEmpty(value)&&Validations.isDate(value,dateFormat)};ngModelCtrl.$parsers.push(function(value){if(ngModelCtrl.$setValidity("date",!0),ngModelCtrl.$isEmpty(value))return ngModelCtrl.$setValidity("date",!1),value;var formattedValue=clearValue(value);return validations(formattedValue)||ngModelCtrl.$setValidity("date",!1),ngModelCtrl.$viewValue!==formattedValue&&(ngModelCtrl.$setViewValue(formattedValue),ngModelCtrl.$render()),angular.isUndefined(ngModelCtrl.$viewValue)?formattedValue:"false"===iAttrs.parse?formattedValue:moment(formattedValue).format(dateFormat)})}}}])}(),"use strict",function(){angular.module("ngNucleus").directive("uiFinance",["$locale","Validations",function($locale,Validations){return{require:"ngModel",link:function(scope,iElement,iAttrs,ngModelCtrl){var decimalDelimiter=$locale.NUMBER_FORMATS.DECIMAL_SEP,thousandsDelimiter=$locale.NUMBER_FORMATS.GROUP_SEP,currencySym=$locale.NUMBER_FORMATS.CURRENCY_SYM+" ",clearValue=function(rawValue){rawValue=rawValue.toString().replace(/[^0-9.,]/g,"");var integer=rawValue.substr(0,rawValue.indexOf(decimalDelimiter));integer=integer.toString().replace(/[^0-9]/g,"");var floating=rawValue.substr(rawValue.indexOf(decimalDelimiter)-rawValue.length),cleanValue=integer+floating,number=cleanValue.toString().replace(decimalDelimiter,thousandsDelimiter);return ngModelCtrl.$isEmpty(number)?number:(+number).toString()},format=function(cleanValue){if(ngModelCtrl.$isEmpty(cleanValue))return cleanValue;1==cleanValue.split(thousandsDelimiter).length-1&&(cleanValue=cleanValue.toString().replace(thousandsDelimiter,decimalDelimiter));var integer=cleanValue.substr(0,cleanValue.indexOf(decimalDelimiter));integer=integer.toString().replace(/\B(?=(\d{3})+(?!\d))/g,thousandsDelimiter);var floating=cleanValue.substr(cleanValue.indexOf(decimalDelimiter)-cleanValue.length);return angular.isDefined(iAttrs.decimals)&&0<parseInt(iAttrs.decimals)&&(floating=floating.substr(0,parseInt(iAttrs.decimals)+1)),angular.isDefined(iAttrs.currency)&&(!0===iAttrs.currency||iAttrs.currency)?currencySym+integer+floating:integer+floating},validations=function(value){return angular.isDefined(value)&&""!==value&&Validations.isNumber(value)};ngModelCtrl.$parsers.push(function(value){if(ngModelCtrl.$setValidity("finance",!0),ngModelCtrl.$isEmpty(value))return ngModelCtrl.$setValidity("finance",!1),value;var cleanValue=clearValue(value),formattedValue=format(cleanValue);return validations(cleanValue)||ngModelCtrl.$setValidity("finance",!1),ngModelCtrl.$viewValue!==formattedValue&&(ngModelCtrl.$setViewValue(formattedValue),ngModelCtrl.$render()),angular.isUndefined(ngModelCtrl.$viewValue)?cleanValue:formattedValue})}}}])}(),"use strict",function(){angular.module("ngNucleus").directive("uiInscricaoMunicipal",["Validations",function(Validations){return{require:"ngModel",link:function(scope,iElement,iAttrs,ngModelCtrl){var clearValue=function(rawValue){return(+rawValue.toString().replace(/[^0-9]/g,"").slice(0,15)).toString()},format=function(cleanValue){return cleanValue.trim()},validations=function(value){return Validations.isInscricaoMunicipal(value)};ngModelCtrl.$parsers.push(function(value){if(ngModelCtrl.$setValidity("inscricaoMunicipal",!0),ngModelCtrl.$isEmpty(value))return ngModelCtrl.$setValidity("inscricaoMunicipal",!1),value;var cleanValue=clearValue(value),formattedValue=format(cleanValue);return validations(cleanValue)||ngModelCtrl.$setValidity("inscricaoMunicipal",!1),ngModelCtrl.$viewValue!==formattedValue&&(ngModelCtrl.$setViewValue(formattedValue),ngModelCtrl.$render()),angular.isUndefined(ngModelCtrl.$viewValue)?cleanValue:formattedValue})}}}])}(),"use strict",function(){angular.module("ngNucleus").directive("uiNumberIntegerOnly",[function(){return{require:"ngModel",link:function(scope,iElement,iAttrs,ngModelCtrl){ngModelCtrl.$parsers.push(function(value){var _Mathtrunc=Math.trunc,_NumberisInteger=Number.isInteger;ngModelCtrl.$setValidity("min",!0),ngModelCtrl.$setValidity("max",!0),ngModelCtrl.$setValidity("integer",!0);var input=value.toString().replace(/[^0-9.-]/g,"");return _NumberisInteger(+input)?input=input.replace(".",""):ngModelCtrl.$setValidity("integer",!1),angular.isDefined(iAttrs.numberMin)&&parseInt(input)<parseInt(iAttrs.numberMin)?ngModelCtrl.$setValidity("min",!1):angular.isDefined(iAttrs.numberMax)&&parseInt(input)>parseInt(iAttrs.numberMax)&&ngModelCtrl.$setValidity("max",!1),input!==value.toString()&&(ngModelCtrl.$setViewValue(input),ngModelCtrl.$render()),_Mathtrunc(+input)})}}}])}(),"use strict",function(){angular.module("ngNucleus").directive("uiPis",["Validations","$window",function(Validations,$window){return{require:"ngModel",link:function(scope,iElement,iAttrs,ngModelCtrl){var clearValue=function(rawValue){return rawValue.toString().replace(/[^0-9]/g,"").slice(0,11)},format=function(cleanValue){var formattedValue=$window.StringMask.apply(cleanValue,"000.0000.000-0");return formattedValue.trim()},validations=function(value){return Validations.isPis(value)};ngModelCtrl.$parsers.push(function(value){if(ngModelCtrl.$setValidity("pis",!0),ngModelCtrl.$isEmpty(value))return ngModelCtrl.$setValidity("pis",!1),value;var cleanValue=clearValue(value),formattedValue=format(cleanValue);return validations(cleanValue)||ngModelCtrl.$setValidity("pis",!1),ngModelCtrl.$viewValue!==formattedValue&&(ngModelCtrl.$setViewValue(formattedValue),ngModelCtrl.$render()),angular.isUndefined(ngModelCtrl.$viewValue)?cleanValue:formattedValue})}}}])}(),"use strict",function(){angular.module("ngNucleus").directive("uiScientificNotation",["Validations",function(Validations){return{require:"ngModel",link:function(scope,iElement,iAttrs,ngModelCtrl){var clearValue=function(rawValue){return rawValue.toString().replace(/[^0-9.-]/g,"")},validations=function(value){return!(angular.isDefined(iAttrs.min)&&parseFloat(value)<parseFloat(iAttrs.min))&&!(angular.isDefined(iAttrs.max)&&parseFloat(value)>parseFloat(iAttrs.max))&&angular.isDefined(value)&&""!==value&&Validations.isNumber(value)},format=function(value){return ngModelCtrl.$isEmpty(value)?value:(+value).toString()};ngModelCtrl.$parsers.push(function(value){if(ngModelCtrl.$setValidity("notation",!0),ngModelCtrl.$isEmpty(value))return ngModelCtrl.$setValidity("notation",!1),value;var cleanValue=clearValue(value),formattedValue=format(cleanValue);return validations(cleanValue)||ngModelCtrl.$setValidity("notation",!1),ngModelCtrl.$viewValue!==formattedValue&&(ngModelCtrl.$setViewValue(formattedValue),ngModelCtrl.$render()),angular.isUndefined(ngModelCtrl.$viewValue)?cleanValue:formattedValue})}}}])}(),"use strict",function(){angular.module("ngNucleus").directive("uiStringOnlyMask",[function(){return{require:"ngModel",link:function(scope,iElement,iAttrs,ngModelCtrl){ngModelCtrl.$parsers.push(function(value){var input=value.toString().replace(/[^a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð ,.'-+$]/g,"");return input!==value.toString()&&(ngModelCtrl.$setViewValue(input),ngModelCtrl.$render()),input+""})}}}])}(),"use strict",function(){angular.module("ngNucleus").directive("uiTitulo",["Validations",function(Validations){return{require:"ngModel",link:function(scope,iElement,iAttrs,ngModelCtrl){var clearValue=function(rawValue){return rawValue.toString().replace(/[^0-9]/g,"").slice(0,12)},format=function(cleanValue){return cleanValue.trim()},validations=function(value){return Validations.isTitulo(value)};ngModelCtrl.$parsers.push(function(value){if(ngModelCtrl.$setValidity("titulo",!0),ngModelCtrl.$isEmpty(value))return ngModelCtrl.$setValidity("titulo",!1),value;var cleanValue=clearValue(value),formattedValue=format(cleanValue);return validations(cleanValue)||ngModelCtrl.$setValidity("titulo",!1),ngModelCtrl.$viewValue!==formattedValue&&(ngModelCtrl.$setViewValue(formattedValue),ngModelCtrl.$render()),angular.isUndefined(ngModelCtrl.$viewValue)?cleanValue:formattedValue})}}}])}(),"use strict",function(){angular.module("ngNucleus").directive("uiUpperCase",[function(){return{require:"ngModel",link:function(scope,iElement,iAttrs,ngModelCtrl){ngModelCtrl.$parsers.push(function(value){return value.toString().toUpperCase()})}}}])}(),"use strict",function(){angular.module("ngNucleus").factory("Validations",["$window",function($window){return{isCpf:function(value){return $window.BrV.cpf.validate(value.toString())},isDate:function(value,dateFormat){return angular.isUndefined(dateFormat)||""===dateFormat?moment(value).isValid():moment(value,dateFormat).isValid()&&value.length===dateFormat.length},isISODateString:function(value){return /^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]{3}([-+][0-9]{2}:[0-9]{2}|Z)$/.test(value.toString())},isNumber:function(value){return!isNaN(value)},isInscricaoMunicipal:function(value){return!isNaN(value)&&!["0","000000000000000","111111111111111","222222222222222","333333333333333","444444444444444","555555555555555","666666666666666","777777777777777","888888888888888","999999999999999"].includes(value.toString())&&0<value.toString().length&&16>value.toString().length},isPis:function(value){return 10<value.toString().length&&15>value.toString().length&&$window.BrV.pis.validate(value.toString())},isTitulo:function(value){value=value.toString();var dig1=0,dig2=0,tam=value.length,digitos=value.substr(tam-2,2),estado=value.substr(tam-4,2),titulo=value.substr(0,tam-2);titulo="000000000000"+titulo,titulo=titulo.substr(titulo.length-11,titulo.length-1);var exce="01"===estado||"02"===estado;dig1=2*(titulo.charCodeAt(0)-48)+9*(titulo.charCodeAt(1)-48)+8*(titulo.charCodeAt(2)-48)+7*(titulo.charCodeAt(3)-48)+6*(titulo.charCodeAt(4)-48)+5*(titulo.charCodeAt(5)-48)+4*(titulo.charCodeAt(6)-48)+3*(titulo.charCodeAt(7)-48)+2*(titulo.charCodeAt(8)-48);var resto=dig1%11;return dig1=0==resto?exce?1:0:1==resto?0:11-resto,dig2=4*(titulo.charCodeAt(9)-48)+3*(titulo.charCodeAt(10)-48)+2*dig1,resto=dig2%11,dig2=0==resto?exce?1:0:1==resto?0:11-resto,digitos.charCodeAt(0)-48==dig1&&digitos.charCodeAt(1)-48===dig2}}}])}(),exports.ngNucleus=exports.default});